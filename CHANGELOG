2026-02-06
- fix: macOS demucs subprocess spawning duplicate GUI — changed separator.py to call demucs as a Python library (get_model, apply_model, save_audio) instead of subprocess; subprocess used sys.executable which in PyInstaller bundle points to the app itself
- fix: macOS scipy import crash at startup — made scipy.signal import lazy inside stem_processor.enhance_audio_quality(); avoids PyInstaller bytecode bug in scipy.stats._distn_infrastructure
- fix: macOS ffprobe not found — bundled static ffmpeg/ffprobe binaries in packaging/macos/bin/; launcher adds bundle bin/ to PATH
- fix: macOS ffprobe SIGABRT crash — replaced homebrew ffprobe (30+ dylib dependencies) with static builds from evermeet.cx (only system frameworks)
- fix: macOS/Windows "name 'name' is not defined" crash — three-layer defense against PyInstaller bytecode bug in torch/_numpy/_ufuncs.py:
  - Layer 1 (Primary): runtime_hook.py installs torch._numpy stub modules in sys.modules before any imports, preventing the corrupted bytecode from ever executing
  - Layer 2 (Backup): build.sh patches vars()[name] loops to globals().update() dict comprehensions before PyInstaller runs, restores after
  - Layer 3: stembler.spec excludes all torch._numpy submodules from the bundle entirely
  - TORCHDYNAMO_DISABLE=1 alone was insufficient because torch._dynamo.__init__ unconditionally imports submodules at module level before reading the env var
- feat: macOS stembler.spec now includes runtime_hook.py, static ffmpeg binaries, and additional hidden imports (einops, openunmix, dora)
- feat: Windows stembler.spec now includes runtime_hook.py, hidden imports for einops/torch/torchaudio, torch._numpy excludes, and reads version from pyproject.toml
- fix: macOS launcher.py adds multiprocessing.freeze_support() for PyInstaller child process handling
- fix: Windows launcher.py adds multiprocessing.freeze_support() for PyInstaller child process handling

2026-02-05
- fix: macOS DMG app fails to launch — re-enable PyInstaller BUNDLE step (was commented out due to PyQt6 symlink workaround); bootloader requires .app layout to find libpython in Contents/Frameworks/
- fix: macOS stembler.spec version hardcoded — read app_version from pyproject.toml via tomllib; pre-clean loop now covers both dist/Stembler and dist/Stembler.app
- fix: macOS build.sh smoke-test targets stale dist/Stembler/ path — updated to check dist/Stembler.app bundle; removed redundant create_app_bundle.sh invocation (BUNDLE produces .app directly)
- fix: macOS/Windows launcher.py duplicated QApplication setup — stripped to thin entry-point that delegates entirely to gui_main.main()
- fix: SettingsPanel QGroupBox titles invisible — added explicit color and background-color to ::title pseudo-element in both group boxes
- fix: SettingsPanel form labels invisible — replaced bare-string addRow labels with explicitly styled QLabel widgets for Model, Output Directory, Enhancement, Client ID, Client Secret
- fix: SettingsPanel Show buttons rendered on separate rows — moved each Show button inline with its credential field via QHBoxLayout
- fix: SettingsPanel Show buttons used opaque secondary style — replaced with ghost/outline stylesheet, added Show/Hide text toggle on checked state
- fix: SettingsPanel Cancel button unstyled — added ghost outline stylesheet; Save button now explicitly uses primary green style
- fix: SettingsPanel credential validation used modal QMessageBox — replaced with inline status label showing success/error feedback beneath the Test Credentials button
- test: Add 27 headless widget tests for SettingsPanel covering all six UX fixes (title styles, label visibility, inline Show buttons, ghost button style, dialog button styles, inline credential validation)
- feat: Add clear/reset button to file input success banner; visible only in valid-input state, flush-right inside the green card, participates in widget enable/disable cycle
- test: Add 14 headless widget tests for FileInputWidget clear button (visibility, reset behaviour, enabled state); add conftest with session-scoped offscreen QApplication fixture
- fix: Rationalize green color usage — add blue ACCENT palette (#3B82F6) for Browse button and input focus rings; reserve green for primary action and success feedback only
- feat: Add gear icon settings button to main window header (top-right, borderless, opens SettingsPanel on click)

2026-02-04
- fix: Success screen text invisible — file_input green-on-green contrast, progress/result labels lost after QFrame re-style
- fix: packaging launcher E402 noqa placement broken by black multi-line wrap; build_msi unused cx_Freeze probe imports and bare f-string
- chore: Run black across full project (21 files reformatted)
- feat: Add "Separate Another Track" outline button to result display, resets UI for a new job
- fix: progress_display.reset() now restores status_label stylesheet (was left green/red after complete/error)
- fix: GUI progress and result labels invisible due to QFrame stylesheet cascading in PyQt6
- fix: GUI file input drop zone stayed at 180px after file selection, OR separator never hidden
- fix: Window title showed "vunknown" — version.py path traversal was one level short
- fix: Update yt-dlp from 2025.10.22 to 2026.2.4 to resolve YouTube Music 403 blocks
- fix: Add youtube as fallback audio provider when youtube-music fails
- fix: output_manager peak_db format crash when value is missing
- fix: test_spotify_handler tests missing env var mocks
- fix: test_separator tests mocking wrong target (demucs.api.separate vs subprocess.run)
- fix: test_input_processor incorrectly classifying YouTube URLs as invalid
- chore: Remove 12 unused imports flagged by ruff
